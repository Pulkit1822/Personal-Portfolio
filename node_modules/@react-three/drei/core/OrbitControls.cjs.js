"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),t=require("@react-three/fiber"),r=require("react"),n=require("three-stdlib");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var a=s(e),u=o(r);const c=u.forwardRef((({makeDefault:e,camera:r,regress:s,domElement:o,enableDamping:c=!0,onChange:i,onStart:f,onEnd:d,...l},m)=>{const b=t.useThree((e=>e.invalidate)),v=t.useThree((e=>e.camera)),h=t.useThree((e=>e.gl)),E=t.useThree((e=>e.events)),p=t.useThree((e=>e.setEvents)),g=t.useThree((e=>e.set)),O=t.useThree((e=>e.get)),j=t.useThree((e=>e.performance)),T=r||v,L=o||E.connected||h.domElement,y=u.useMemo((()=>new n.OrbitControls(T)),[T]);return t.useFrame((()=>{y.enabled&&y.update()}),-1),u.useEffect((()=>(y.connect(L),()=>{y.dispose()})),[L,s,y,b]),u.useEffect((()=>{const e=e=>{b(),s&&j.regress(),i&&i(e)},t=e=>{f&&f(e)},r=e=>{d&&d(e)};return y.addEventListener("change",e),y.addEventListener("start",t),y.addEventListener("end",r),()=>{y.removeEventListener("start",t),y.removeEventListener("end",r),y.removeEventListener("change",e)}}),[i,f,d,y,b,p]),u.useEffect((()=>{if(e){const e=O().controls;return g({controls:y}),()=>g({controls:e})}}),[e,y]),u.createElement("primitive",a.default({ref:m,object:y,enableDamping:c},l))}));exports.OrbitControls=c;
