System.register([],function(b){"use strict";return{execute:function(){b("atom",N);let L=0;function N(i,l){const g=`atom${++L}`,v={toString:()=>g};return typeof i=="function"?v.read=i:(v.init=i,v.read=E=>E(v),v.write=(E,z,h)=>z(v,typeof h=="function"?h(E(v)):h)),l&&(v.write=l),v}const V=i=>"init"in i,q=i=>!!i.write,M=new WeakMap,R=(i,l)=>{M.set(i,l),i.catch(()=>{}).finally(()=>M.delete(i))},B=(i,l)=>{const g=M.get(i);g&&(M.delete(i),g(l))},F=(i,l)=>{i.status="fulfilled",i.value=l},G=(i,l)=>{i.status="rejected",i.reason=l},T=i=>typeof(i==null?void 0:i.then)=="function",y=(i,l)=>"v"in i&&"v"in l&&Object.is(i.v,l.v),H=(i,l)=>"e"in i&&"e"in l&&Object.is(i.e,l.e),p=i=>"v"in i&&i.v instanceof Promise,U=(i,l)=>"v"in i&&"v"in l&&i.v.orig&&i.v.orig===l.v.orig,S=i=>{if("e"in i)throw i.e;return i.v},_=b("createStore",()=>{const i=new WeakMap,l=new WeakMap,g=new Map,v=t=>i.get(t),E=(t,e)=>{const o=i.get(t);if(i.set(t,e),g.has(t)||g.set(t,o),o&&p(o)){const n="v"in e?e.v instanceof Promise?e.v:Promise.resolve(e.v):Promise.reject(e.e);B(o.v,n)}},z=(t,e,o)=>{const n=new Map;let s=!1;o.forEach((r,c)=>{!r&&c===t&&(r=e),r&&(n.set(c,r),e.d.get(c)!==r&&(s=!0))}),(s||e.d.size!==n.size)&&(e.d=n)},h=(t,e,o)=>{const n=v(t),s={d:(n==null?void 0:n.d)||new Map,v:e};if(o&&z(t,s,o),n&&y(n,s)&&n.d===s.d)return n;if(n&&p(n)&&p(s)&&U(n,s)){if(n.d===s.d)return n;s.v=n.v}return E(t,s),s},I=(t,e,o,n)=>{if(T(e)){let s;const r=new Promise((c,f)=>{let a=!1;e.then(d=>{if(!a){a=!0;const u=v(t),w=h(t,r,o);F(r,d),c(d),(u==null?void 0:u.d)!==w.d&&O(t,w,u==null?void 0:u.d)}},d=>{if(!a){a=!0;const u=v(t),w=h(t,r,o);G(r,d),f(d),(u==null?void 0:u.d)!==w.d&&O(t,w,u==null?void 0:u.d)}}),s=d=>{a||(a=!0,d.then(u=>F(r,u),u=>G(r,u)),c(d))}});return r.orig=e,r.status="pending",R(r,c=>{c&&s(c),n==null||n()}),h(t,r,o)}return h(t,e,o)},$=(t,e,o)=>{const n=v(t),s={d:(n==null?void 0:n.d)||new Map,e};return o&&z(t,s,o),n&&H(n,s)&&n.d===s.d?n:(E(t,s),s)},m=t=>{const e=v(t);if(e&&(e.d.forEach((a,d)=>{d!==t&&!l.has(d)&&m(d)}),Array.from(e.d).every(([a,d])=>a===t||v(a)===d)))return e;const o=new Map;let n=!0;const s=a=>{if(a===t){const u=v(a);if(u)return o.set(a,u),S(u);if(V(a))return o.set(a,void 0),a.init;throw new Error("no atom init")}const d=m(a);return o.set(a,d),S(d)};let r,c;const f={get signal(){return r||(r=new AbortController),r.signal},get setSelf(){return!c&&q(t)&&(c=(...a)=>{if(!n)return j(t,...a)}),c}};try{const a=t.read(s,f);return I(t,a,o,()=>r==null?void 0:r.abort())}catch(a){return $(t,a,o)}finally{n=!1}},x=t=>S(m(t)),K=t=>{let e=l.get(t);return e||(e=W(t)),e},P=(t,e)=>!e.l.size&&(!e.t.size||e.t.size===1&&e.t.has(t)),Q=t=>{const e=l.get(t);e&&P(t,e)&&D(t)},X=t=>{const e=new Map,o=new WeakMap,n=r=>{const c=l.get(r);c==null||c.t.forEach(f=>{f!==r&&(e.set(f,(e.get(f)||new Set).add(r)),o.set(f,(o.get(f)||0)+1),n(f))})};n(t);const s=r=>{const c=l.get(r);c==null||c.t.forEach(f=>{var a;if(f!==r){let d=o.get(f);if(d&&o.set(f,--d),!d){let u=!!((a=e.get(f))!=null&&a.size);if(u){const w=v(f),Y=m(f);u=!w||!y(w,Y)}u||e.forEach(w=>w.delete(f))}s(f)}})};s(t)},J=(t,...e)=>{let o=!0;const n=c=>S(m(c)),s=(c,...f)=>{let a;if(c===t){if(!V(c))throw new Error("atom not writable");const d=v(c),u=I(c,f[0]);(!d||!y(d,u))&&X(c)}else a=J(c,...f);return o||C(),a},r=t.write(n,s,...e);return o=!1,r},j=(t,...e)=>{const o=J(t,...e);return C(),o},W=(t,e)=>{const o={t:new Set(e&&[e]),l:new Set};if(l.set(t,o),m(t).d.forEach((n,s)=>{const r=l.get(s);r?r.t.add(t):s!==t&&W(s,t)}),m(t),q(t)&&t.onMount){const n=t.onMount((...s)=>j(t,...s));n&&(o.u=n)}return o},D=t=>{var e;const o=(e=l.get(t))==null?void 0:e.u;o&&o(),l.delete(t);const n=v(t);n&&(p(n)&&B(n.v),n.d.forEach((s,r)=>{if(r!==t){const c=l.get(r);c&&(c.t.delete(t),P(r,c)&&D(r))}}))},O=(t,e,o)=>{const n=new Set(e.d.keys());o==null||o.forEach((s,r)=>{if(n.has(r)){n.delete(r);return}const c=l.get(r);c&&(c.t.delete(t),P(r,c)&&D(r))}),n.forEach(s=>{const r=l.get(s);r?r.t.add(t):l.has(t)&&W(s,t)})},C=()=>{for(;g.size;){const t=Array.from(g);g.clear(),t.forEach(([e,o])=>{const n=v(e);if(n){n.d!==(o==null?void 0:o.d)&&O(e,n,o==null?void 0:o.d);const s=l.get(e);s&&!(o&&!p(o)&&(y(o,n)||H(o,n)))&&s.l.forEach(r=>r())}})}};return{get:x,set:j,sub:(t,e)=>{const o=K(t);C();const n=o.l;return n.add(e),()=>{n.delete(e),Q(t)}}}});let k;const Z=b("getDefaultStore",()=>(k||(k=_()),k))}}});
